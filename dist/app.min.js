define(function(){return function(modules){function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={i:moduleId,l:!1,exports:{}};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.l=!0,module.exports}var installedModules={};return __webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.d=function(exports,name,getter){__webpack_require__.o(exports,name)||Object.defineProperty(exports,name,{configurable:!1,enumerable:!0,get:getter})},__webpack_require__.n=function(module){var getter=module&&module.__esModule?function(){return module.default}:function(){return module};return __webpack_require__.d(getter,"a",getter),getter},__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=2)}([function(module,exports,__webpack_require__){"use strict";(function(module){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__,_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};!function(root,factory){if("object"==_typeof(exports)&&"object"==_typeof(module))module.exports=factory();else{__WEBPACK_AMD_DEFINE_ARRAY__=[],__WEBPACK_AMD_DEFINE_FACTORY__=factory,void 0!==(__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__)&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)}}("undefined"!=typeof self&&self,function(){return function(modules){function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={i:moduleId,l:!1,exports:{}};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.l=!0,module.exports}var installedModules={};return __webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.d=function(exports,name,getter){__webpack_require__.o(exports,name)||Object.defineProperty(exports,name,{configurable:!1,enumerable:!0,get:getter})},__webpack_require__.n=function(module){var getter=module&&module.__esModule?function(){return module.default}:function(){return module};return __webpack_require__.d(getter,"a",getter),getter},__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=2)}([function(module,exports,__webpack_require__){function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=(void 0===call?"undefined":_typeof(call))&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+(void 0===superClass?"undefined":_typeof(superClass)));subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.FunctionalArrayCollection=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_FunctionalCollection2=__webpack_require__(1);exports.FunctionalArrayCollection=function(_FunctionalCollection){function FunctionalArrayCollection(){return _classCallCheck(this,FunctionalArrayCollection),_possibleConstructorReturn(this,(FunctionalArrayCollection.__proto__||Object.getPrototypeOf(FunctionalArrayCollection)).apply(this,arguments))}return _inherits(FunctionalArrayCollection,_FunctionalCollection),_createClass(FunctionalArrayCollection,[{key:"getItems",value:function(){return this._getItems().slice()}},{key:"hasItem",value:function(item){var foundItemIndex=null,items=this._getItems(),itemKey=this._keyGetter(item);for(var i in items)if(this._keyGetter(items[i])===itemKey){foundItemIndex=i;break}return null!==foundItemIndex}},{key:"_addItem",value:function(items,item){return items=items.slice(),items.push(item),items}},{key:"_removeItem",value:function(items,item){var foundItemIndex=null,itemKey=this._keyGetter(item);for(var i in items)if(this._keyGetter(items[i])==itemKey){foundItemIndex=i;break}return null!==foundItemIndex&&items.splice(foundItemIndex,1),items}}]),FunctionalArrayCollection}(_FunctionalCollection2.FunctionalCollection)},function(module,exports,__webpack_require__){function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();exports.FunctionalCollection=function(){function FunctionalCollection(getItems,setItems,keyGetter){if(_classCallCheck(this,FunctionalCollection),!getItems)throw new Error("Getter must be provided");if(!setItems)throw new Error("Setter must be provided");if(!keyGetter)throw new Error("Key getter must be provided");this._itemsGetter=getItems,this._itemsSetter=setItems,this._keyGetter=keyGetter}return _createClass(FunctionalCollection,[{key:"_setItems",value:function(items){this._itemsSetter(items)}},{key:"_getItems",value:function(){return this._itemsGetter()}},{key:"getItems",value:function(){return Object.assign({},this._getItems())}},{key:"addItem",value:function(item){var items=this._getItems();items=this._addItem(items,item),this._setItems(items)}},{key:"hasItem",value:function(item){return!!this._getItems()[this._keyGetter(item)]}},{key:"removeItem",value:function(item){var items=this._getItems();items=this._removeItem(items,item),this._setItems(items)}},{key:"_addItem",value:function(items,item){items=Object.assign({},items);var id=this._keyGetter(item);if(items[id])throw new Error("Item with id "+id+" already exists");return items[id]=item,items}},{key:"_removeItem",value:function(items,item){return items=Object.assign({},items),delete items[this._keyGetter(item)],items}},{key:"_addItems",value:function(items,newItems){for(var i in newItems)this._addItem(items,newItems[i]);return items}}]),FunctionalCollection}()},function(module,exports,__webpack_require__){Object.defineProperty(exports,"__esModule",{value:!0});var _FunctionalCollection=__webpack_require__(1);Object.defineProperty(exports,"FunctionalCollection",{enumerable:!0,get:function(){return _FunctionalCollection.FunctionalCollection}});var _FunctionalArrayCollection=__webpack_require__(0);Object.defineProperty(exports,"FunctionalArrayCollection",{enumerable:!0,get:function(){return _FunctionalArrayCollection.FunctionalArrayCollection}});var _FunctionalLimitedCollection=__webpack_require__(3);Object.defineProperty(exports,"FunctionalLimitedCollection",{enumerable:!0,get:function(){return _FunctionalLimitedCollection.FunctionalLimitedCollection}}),Object.defineProperty(exports,"FLC_OVERFLOW_THROW",{enumerable:!0,get:function(){return _FunctionalLimitedCollection.FLC_OVERFLOW_THROW}}),Object.defineProperty(exports,"FLC_OVERFLOW_PREPEND",{enumerable:!0,get:function(){return _FunctionalLimitedCollection.FLC_OVERFLOW_PREPEND}});var _FunctionalRestrictedCollection=__webpack_require__(4);Object.defineProperty(exports,"FunctionalRestrictedCollection",{enumerable:!0,get:function(){return _FunctionalRestrictedCollection.FunctionalRestrictedCollection}});var _FunctionalToggleable=__webpack_require__(5);Object.defineProperty(exports,"FunctionalToggleable",{enumerable:!0,get:function(){return _FunctionalToggleable.FunctionalToggleable}});var _Page=__webpack_require__(6);Object.defineProperty(exports,"Page",{enumerable:!0,get:function(){return _Page.Page}})},function(module,exports,__webpack_require__){function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=(void 0===call?"undefined":_typeof(call))&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+(void 0===superClass?"undefined":_typeof(superClass)));subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.FunctionalLimitedCollection=exports.FLC_OVERFLOW_PREPEND=exports.FLC_OVERFLOW_THROW=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_FunctionalArrayCollection=__webpack_require__(0),FLC_OVERFLOW_THROW=exports.FLC_OVERFLOW_THROW="throw",FLC_OVERFLOW_PREPEND=exports.FLC_OVERFLOW_PREPEND="prepend";exports.FunctionalLimitedCollection=function(_FunctionalArrayColle){function FunctionalLimitedCollection(getItems,setItems,keyGetter,limit,overflowMode){if(_classCallCheck(this,FunctionalLimitedCollection),!limit)throw new Error("Collection limit must be provided");if(!overflowMode)throw new Error("Overflow mode for collection must be provided");var _this=_possibleConstructorReturn(this,(FunctionalLimitedCollection.__proto__||Object.getPrototypeOf(FunctionalLimitedCollection)).call(this,getItems,setItems,keyGetter));if(-1===_this._getAllowedOverflowModes().indexOf(overflowMode))throw new Error("Wrong overflow mode is provided");return _this._limit=limit,_this._overflowMode=overflowMode,_this._checkOverflow(),_this}return _inherits(FunctionalLimitedCollection,_FunctionalArrayColle),_createClass(FunctionalLimitedCollection,[{key:"_getAllowedOverflowModes",value:function(){return[FLC_OVERFLOW_THROW,FLC_OVERFLOW_PREPEND]}},{key:"_addItem",value:function(items,item){if(items.length+1>this._limit)switch(this._overflowMode){case FLC_OVERFLOW_THROW:throw new Error("Limited collection can hold not more that "+this._limit+" items");case FLC_OVERFLOW_PREPEND:return this._addItemToStart(items,item)}return items=items.slice(),items.push(item),items}},{key:"_addItemToStart",value:function(items,item){return void 0!==this._lastAddedIndex&&this._lastAddedIndex!=items.length-1||(this._lastAddedIndex=-1),this._lastAddedIndex++,items=items.slice(),items[this._lastAddedIndex]=item,items}},{key:"_checkOverflow",value:function(){var items=this._getItems();if(!(items.length<=this._limit))switch(this._overflowMode){case FLC_OVERFLOW_THROW:throw new Error("Limited collection can hold not more that "+this._limit+" items");case FLC_OVERFLOW_PREPEND:this._setItems(items.slice(this._limit))}}}]),FunctionalLimitedCollection}(_FunctionalArrayCollection.FunctionalArrayCollection)},function(module,exports,__webpack_require__){function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=(void 0===call?"undefined":_typeof(call))&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+(void 0===superClass?"undefined":_typeof(superClass)));subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.FunctionalRestrictedCollection=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_FunctionalArrayCollection=__webpack_require__(0);exports.FunctionalRestrictedCollection=function(_FunctionalArrayColle){function FunctionalRestrictedCollection(getItems,setItems,keyGetter,itemAllowed){if(_classCallCheck(this,FunctionalRestrictedCollection),!itemAllowed)throw new Error("Item allowed checker must be provided");var _this=_possibleConstructorReturn(this,(FunctionalRestrictedCollection.__proto__||Object.getPrototypeOf(FunctionalRestrictedCollection)).call(this,getItems,setItems,keyGetter));return _this._itemAllowed=itemAllowed,_this}return _inherits(FunctionalRestrictedCollection,_FunctionalArrayColle),_createClass(FunctionalRestrictedCollection,[{key:"isAllowed",value:function(item){return this._itemAllowed(this.getItems(),item)}}]),FunctionalRestrictedCollection}(_FunctionalArrayCollection.FunctionalArrayCollection)},function(module,exports,__webpack_require__){function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();exports.FunctionalToggleable=function(){function FunctionalToggleable(set,get){_classCallCheck(this,FunctionalToggleable),this._stateSetter=set,this._stateGetter=get}return _createClass(FunctionalToggleable,[{key:"_setState",value:function(isOn){this._stateSetter(!!isOn)}},{key:"_getState",value:function(){return this._stateGetter()}},{key:"isOn",value:function(){return!!this._getState()}},{key:"setState",value:function(isOn){this._setState(!!isOn)}}]),FunctionalToggleable}()},function(module,exports,__webpack_require__){function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();exports.Page=function(){function Page(id,template){_classCallCheck(this,Page),this.id=id,this.template=template}return _createClass(Page,[{key:"render",value:function(ctx){return this.template}}]),Page}()}])})}).call(exports,__webpack_require__(4)(module))},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),Api=function(){function Api(httpClient,config){_classCallCheck(this,Api),this.http=httpClient,this.config=config}return _createClass(Api,[{key:"prepareParams",value:function(params){return params}}]),Api}();exports.default=Api},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _services=__webpack_require__(3);Object.defineProperty(exports,"services",{enumerable:!0,get:function(){return _services.services}})},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function services(dependencies,_document){var allServices={document:function(){return _document},dom:function(container){return new dependencies.uiFramework.Dom.Dom(container.document)},selectorList:function(){return[]},store:function(container){return new container.vuex.Store(_store3.default)},availabilityEditorStateToggleable:function(container){return new _stdLib.FunctionalToggleable(function(newVisibility){container.store.commit("ui/setAvailabilityModalVisibility",newVisibility)},function(){return container.store.state.ui.availabilityModalVisible})},bookingEditorState:function(container){return new _stdLib.FunctionalToggleable(function(newVisibility){container.store.commit("ui/setBookingModalVisibility",newVisibility)},function(){return container.store.state.ui.bookingModalVisible})},availabilitiesCollection:function(container){var store=container.store;return new _stdLib.FunctionalArrayCollection(function(){return store.state.app.availabilities},function(newValue){store.commit("setNewAvailabilities",newValue)},function(item){return item.id})},bookingsCollection:function(container){var store=container.store;return new _stdLib.FunctionalArrayCollection(function(){return store.state.app.bookings},function(newValue){store.commit("setNewBookings",newValue)},function(item){return item.id})},bookingStatusesColors:function(){return{"in-cart":"#f6e58d",draft:"#dfe4ea",pending:"#1e90ff",approved:"#00d2d3",scheduled:"#2ed573",cancelled:"#eb4d4b",completed:"#57606f"}},components:function(container){var components={};return Object.keys(registeredComponents).filter(function(key){return"_"!==key[0]&&-1===key.indexOf("abstract")}).map(function(key){components[key]=container[key]}),console.info(components),components}},registeredComponents=(0,_components2.default)(dependencies),registeredApi=(0,_api2.default)(dependencies),registeredLibs=(0,_libs2.default)(dependencies);return _extends({},allServices,registeredComponents,registeredApi,registeredLibs)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.services=void 0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_stdLib=__webpack_require__(0),_store2=__webpack_require__(5),_store3=_interopRequireDefault(_store2),_api=__webpack_require__(16),_api2=_interopRequireDefault(_api),_libs=__webpack_require__(19),_libs2=_interopRequireDefault(_libs),_components=__webpack_require__(22),_components2=_interopRequireDefault(_components);exports.services=services},function(module,exports,__webpack_require__){"use strict";module.exports=function(module){return module.webpackPolyfill||(module.deprecate=function(){},module.paths=[],module.children||(module.children=[]),Object.defineProperty(module,"loaded",{enumerable:!0,get:function(){return module.l}}),Object.defineProperty(module,"id",{enumerable:!0,get:function(){return module.i}}),module.webpackPolyfill=1),module}},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _bookings=__webpack_require__(6),_bookings2=_interopRequireDefault(_bookings),_bookingOptions=__webpack_require__(10),_bookingOptions2=_interopRequireDefault(_bookingOptions),_ui=__webpack_require__(13),_ui2=_interopRequireDefault(_ui),state={app:{availabilities:[],sessions:[],displayOptions:{useCustomerTimezone:!1},bookings:[],screenStatuses:[]}},mutations={setInitialState:function(state,appState){state.app=appState},setNewAvailabilities:function(state,availabilities){state.app.availabilities=availabilities},setSessions:function(state,sessions){state.app.sessions=sessions},setDisplayOptions:function(state,payload){state.app.displayOptions[payload.key]=payload.value},setNewBookings:function(state,bookings){state.app.bookings=bookings},setScreenStatuses:function(state,statuses){state.app.screenStatuses=statuses.slice()}};exports.default={modules:{bookings:_bookings2.default,bookingOptions:_bookingOptions2.default,ui:_ui2.default},state:state,mutations:mutations}},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _state=__webpack_require__(7),_state2=_interopRequireDefault(_state),_mutations=__webpack_require__(8),_mutations2=_interopRequireDefault(_mutations),_actions=__webpack_require__(9),_actions2=_interopRequireDefault(_actions);exports.default={namespaced:!0,state:_state2.default,mutations:_mutations2.default,actions:_actions2.default}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var state={bookingModel:{},services:[],bookings:[],statuses:[],bookingsCount:0,filter:{status:"all",search:null,service:null}};exports.default=state},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var mutations={setBookingEditorState:function(state,model){state.bookingModel=model},setServices:function(state,data){state.services=data},setBookings:function(state,data){state.bookings=data},setBookingsStatuses:function(state,statuses){state.statuses=statuses},setBookingsCount:function(state,count){state.bookingsCount=count},setBookingsFilter:function(state,_ref){var key=_ref.key,value=_ref.value;state.filter[key]=value}};exports.default=mutations},function(module,exports,__webpack_require__){"use strict";function _objectDestructuringEmpty(obj){if(null==obj)throw new TypeError("Cannot destructure undefined")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default={fetchBookings:function(_ref,_ref2){var commit=_ref.commit,api=_ref2.api,params=_ref2.params;return api.fetch(params).then(function(response){commit("setBookings",response.data.items),commit("setBookingsStatuses",response.data.statuses),commit("setBookingsCount",response.data.count)})},saveBookingOnBackend:function(_ref3,_ref4){var api=_ref4.api,model=_ref4.model;return _objectDestructuringEmpty(_ref3),api[model.id?"update":"create"](model)},deleteBookingFromBackend:function(_ref5,_ref6){var api=_ref6.api,model=_ref6.model;return _objectDestructuringEmpty(_ref5),api.delete(model)}}},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _state=__webpack_require__(11),_state2=_interopRequireDefault(_state),_mutations=__webpack_require__(12),_mutations2=_interopRequireDefault(_mutations);exports.default={namespaced:!0,state:_state2.default,mutations:_mutations2.default}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var state={serviceAvailabilityModel:{},sessions:[]};exports.default=state},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var mutations={setAvailabilityEditorState:function(state,model){state.serviceAvailabilityModel=model},setSessions:function(state,sessions){state.sessions=sessions}};exports.default=mutations},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _state=__webpack_require__(14),_state2=_interopRequireDefault(_state),_mutations=__webpack_require__(15),_mutations2=_interopRequireDefault(_mutations);exports.default={namespaced:!0,state:_state2.default,mutations:_mutations2.default}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var state={availabilityModalVisible:!1,bookingModalVisible:!1,bookings:{viewFilter:{},isLoading:!1}};exports.default=state},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var mutations={setAvailabilityModalVisibility:function(state,newVisibility){state.availabilityModalVisible=newVisibility},setBookingModalVisibility:function(state,newVisibility){state.bookingModalVisible=newVisibility},setBookingsViewFilter:function(state,viewFilter){state.bookings.viewFilter=viewFilter},setBookingsIsLoading:function(state,isLoading){state.bookings.isLoading=isLoading}};exports.default=mutations},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(dependencies){return{bookingsApi:function(container){return new _BookingsApi2.default(container.httpClient,container.APP_STATE.endpointsConfig.bookings)},clientsApi:function(container){return new _ClientsApi2.default(container.httpClient,container.APP_STATE.endpointsConfig.clients)}}};var _BookingsApi=__webpack_require__(17),_BookingsApi2=_interopRequireDefault(_BookingsApi),_ClientsApi=__webpack_require__(18),_ClientsApi2=_interopRequireDefault(_ClientsApi)},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_Api2=__webpack_require__(1),_Api3=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_Api2),BookingsApi=function(_Api){function BookingsApi(){return _classCallCheck(this,BookingsApi),_possibleConstructorReturn(this,(BookingsApi.__proto__||Object.getPrototypeOf(BookingsApi)).apply(this,arguments))}return _inherits(BookingsApi,_Api),_createClass(BookingsApi,[{key:"fetch",value:function(params){var fetchConfig=this.config.fetch;return this.http[fetchConfig.method](fetchConfig.endpoint,this.prepareParams(params))}},{key:"create",value:function(model){var createConfig=this.config.create;return this.http[createConfig.method](createConfig.endpoint,this.prepareParams(model))}},{key:"update",value:function(model){var updateConfig=this.config.update;return this.http[updateConfig.method](updateConfig.endpoint,this.prepareParams(model))}},{key:"delete",value:function(model){var deleteConfig=this.config.delete;return this.http[deleteConfig.method](deleteConfig.endpoint,this.prepareParams(model))}}]),BookingsApi}(_Api3.default);exports.default=BookingsApi},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_Api2=__webpack_require__(1),_Api3=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_Api2),ClientsApi=function(_Api){function ClientsApi(){return _classCallCheck(this,ClientsApi),_possibleConstructorReturn(this,(ClientsApi.__proto__||Object.getPrototypeOf(ClientsApi)).apply(this,arguments))}return _inherits(ClientsApi,_Api),_createClass(ClientsApi,[{key:"fetch",value:function(params){var fetchConfig=this.config.fetch;return this.http[fetchConfig.method](fetchConfig.endpoint,this.prepareParams(params))}},{key:"create",value:function(model){var createConfig=this.config.create;return this.http[createConfig.method](createConfig.endpoint,this.prepareParams(model))}}]),ClientsApi}(_Api3.default);exports.default=ClientsApi},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(dependencies){return{vuex:function(container){var Vue=container.vue,Vuex=dependencies.vuex;return Vue.use(Vuex),Vuex},vue:function(){var Vue=dependencies.vue;return Vue.use(dependencies.uiFramework.Core.InjectedComponents),Vue.use(dependencies.timepicker),Vue.use(dependencies.validate,{events:""}),Vue},jquery:function(){return dependencies.jquery},lodash:function(){return dependencies.lodash},momentHelpers:function(container){return(0,_momentHelpers2.momentHelpers)(container.moment)},bookingHelpers:function(container){return(0,_bookingHelpers2.bookingHelpers)(container.bookingStatusesColors)},moment:function(){return dependencies.moment},humanizeDuration:function(){return dependencies.humanizeDuration},equal:function(){return dependencies.fastDeepEqual},httpClient:function(){return dependencies.axios}}};var _momentHelpers2=__webpack_require__(20),_bookingHelpers2=__webpack_require__(21)},function(module,exports,__webpack_require__){"use strict";function momentHelpers(moment){return{weekdaysCache:{},weekdayOfMonthIsSame:function(firstDate,secondDate){return firstDate.day()===secondDate.day()&&this.weekdayInMonth(firstDate)===this.weekdayInMonth(secondDate)},weekdayInMonthNumber:function(date){return{0:"first",1:"second",2:"third",3:"fourth",4:"last"}[this.weekdayInMonth(date,"number")]},weekdayInMonth:function(date){var format=arguments.length>1&&void 0!==arguments[1]&&arguments[1],weekdaysInMonth=this._getWeekdaysInMonth(date),weekdayNumber=weekdaysInMonth.indexOf(date.date()),result={number:weekdayNumber,day:date.format("ddd")};return format?result[format]:result.number+result.day},_getWeekdaysInMonth:function(date){var key=date.format("YYYY/MM.ddd");return this.weekdaysCache[key]||(this.weekdaysCache[key]=this._createWeekdaysInMonth(date)),this.weekdaysCache[key]},_createWeekdaysInMonth:function(date){var firstWeekDay=moment(date).startOf("month").day(date.format("dddd")),result=[];firstWeekDay.date()>7&&firstWeekDay.add(7,"d");for(var month=firstWeekDay.month();month===firstWeekDay.month();)result.push(firstWeekDay.date()),firstWeekDay.add(7,"d");return result}}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.momentHelpers=momentHelpers},function(module,exports,__webpack_require__){"use strict";function bookingHelpers(statusesColors){return{statusStyle:function(status){return{"background-color":statusesColors[status],color:this.getBrightness(statusesColors[status])>.5?"#000":"#fff"}},getBrightness:function(hexCode){return hexCode=hexCode.replace("#",""),(299*parseInt(hexCode.substr(0,2),16)+587*parseInt(hexCode.substr(2,2),16)+114*parseInt(hexCode.substr(4,2),16))/1e3/255}}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.bookingHelpers=bookingHelpers},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(dependencies){return{app:function(container){return(0,_Application2.default)(container.APP_STATE,container.store,container.vuex)},"service-bookings-application":function(container){return(0,_ServiceBookingsApplication.CfServiceBookingsApplication)(container.APP_STATE,container.store,container.vuex)},"bookings-application":function(container){return(0,_BookingsApplication.CfBookingsApplication)(container.APP_STATE,container.store,container.vuex,container.vue)},calendar:function(container){return dependencies.calendar.CfFullCalendar(container.vue,container.jquery,container.lodash.defaultsDeep)},wpListTable:function(container){return container.vue.extend(dependencies.wpListTable.ListTable)},vueselect:function(container){return(0,_RcSelect2.default)(container.vue.extend(dependencies.vueselect.VueSelect))},"availability-calendar":function(container){return(0,_AvailabilityCalendar2.default)(container.calendar,container.moment)},"bookings-calendar":function(container){return(0,_BookingsCalendar2.default)(container.calendar,container.vuex,container.moment)},repeater:function(container){return new dependencies.repeater.CfRepeater(container.vue)},"selection-list":function(container){return new dependencies.selectionList.CfSelectionList(container.repeater)},datepicker:function(){return dependencies.datepicker},_datetimePicker:function(container){return dependencies.datetimePicker.CfDatetimePicker(container.vue)},"datetime-picker":function(container){return(0,_DatetimePicker.CfDatetimePicker)(container._datetimePicker,container.moment)},"time-picker":function(container){return(0,_VueTimepicker.CfVueTimepicker)(container.vue.options.components["vue-timepicker"])},tabs:function(container){return new dependencies.tabs.CfTabs(container.vue)},tab:function(container){return new dependencies.tabs.CfTab(container.vue)},modal:function(container){return(0,_Modal2.default)(container.dialog)},dialog:function(container){return(0,_AbstractDialog2.default)(container.vue)},"abstract-button-group":function(container){return(0,_AbstractButtonsGroup2.default)(container.vue)},switcher:function(container){return(0,_Switcher2.default)(container["abstract-button-group"])},"bool-switcher":function(container){return(0,_BoolSwitcher2.default)(container.switcher)},"session-length":function(container){return new _SessionLength2.default(container.vue,container.vuex)},"abstract-entity-modal-editor":function(container){return new _AbstractEntityModalEditor2.default(container.vue)},"service-availability-editor":function(container){return new _ServiceAvailabilityEditor2.default(container["abstract-entity-modal-editor"],container.vuex,container.moment)},"booking-editor":function(container){return new _BookingEditor2.default(container["abstract-entity-modal-editor"],container.vuex,container.moment,container.lodash.debounce)},"abstract-bookings-view":function(container){return new _AbstractBookingsView.CfAbstractBookingsView(container.vue,container.vuex)},"bookings-calendar-view":function(container){return new _BookingsCalendarView.CfBookingsCalendarView(container["abstract-bookings-view"],container.vuex,container.moment)},"bookings-list-view":function(container){return new _BookingsListView.CfBookingsListView(container["abstract-bookings-view"],container.vuex,container.moment)},"bookings-filter":function(container){return new _BookingsFilter.CfBookingsFilter(container.vuex)}}};var _Application=__webpack_require__(23),_Application2=_interopRequireDefault(_Application),_SessionLength=__webpack_require__(24),_SessionLength2=_interopRequireDefault(_SessionLength),_Modal=__webpack_require__(25),_Modal2=_interopRequireDefault(_Modal),_AbstractEntityModalEditor=__webpack_require__(26),_AbstractEntityModalEditor2=_interopRequireDefault(_AbstractEntityModalEditor),_ServiceAvailabilityEditor=__webpack_require__(27),_ServiceAvailabilityEditor2=_interopRequireDefault(_ServiceAvailabilityEditor),_BookingEditor=__webpack_require__(28),_BookingEditor2=_interopRequireDefault(_BookingEditor),_Switcher=__webpack_require__(29),_Switcher2=_interopRequireDefault(_Switcher),_AbstractButtonsGroup=__webpack_require__(30),_AbstractButtonsGroup2=_interopRequireDefault(_AbstractButtonsGroup),_AbstractDialog=__webpack_require__(31),_AbstractDialog2=_interopRequireDefault(_AbstractDialog),_AvailabilityCalendar=__webpack_require__(32),_AvailabilityCalendar2=_interopRequireDefault(_AvailabilityCalendar),_BookingsCalendar=__webpack_require__(33),_BookingsCalendar2=_interopRequireDefault(_BookingsCalendar),_BoolSwitcher=__webpack_require__(34),_BoolSwitcher2=_interopRequireDefault(_BoolSwitcher),_RcSelect=__webpack_require__(35),_RcSelect2=_interopRequireDefault(_RcSelect),_BookingsCalendarView=__webpack_require__(36),_DatetimePicker=__webpack_require__(37),_BookingsListView=__webpack_require__(38),_ServiceBookingsApplication=__webpack_require__(39),_BookingsApplication=__webpack_require__(40),_VueTimepicker=__webpack_require__(41),_BookingsFilter=__webpack_require__(42),_AbstractBookingsView=__webpack_require__(44)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};exports.default=function(state,store,Vuex){var mapState=Vuex.mapState,mapMutations=Vuex.mapMutations;return{store:store,inject:["calendar","repeater","tabs","tab","modal","session-length","service-availability-editor","bookings-page","switcher","bool-switcher","availability-calendar","selection-list","availabilityEditorStateToggleable"],data:function(){var _this=this;return{activeTab:0,tabsConfig:{switcherClass:"horizontal-tabs",switcherItemClass:"horizontal-tabs__item",switcherActiveItemClass:"_active",tabsClass:"tabs-content"},calendarConfig:{showDatesInCustomersTimezone:!1},selectedStatuses:[],statuses:[{key:"in-cart",value:"In Cart"},{key:"approved",value:"Approved"},{key:"completed",value:"Completed"},{key:"scheduled",value:"Scheduled"},{key:"pending",value:"Pending"},{key:"draft",value:"Draft"},{key:"cancelled",value:"Cancelled"}],statusesCollection:new _stdLib.FunctionalArrayCollection(function(){return _this.statuses},function(newValue){},function(item){return item.key})}},computed:_extends({},mapState({events:function(state){return state.app.events},screenStatuses:function(state){return state.app.screenStatuses}})),mounted:function(){if(!state)throw new Error("App state not initialized");if(state.services){var services=state.services.slice();delete state.services,this.setInitialState(state),this.setServices(services)}this.selectedStatuses=this.screenStatuses.slice()},methods:_extends({},mapMutations(["setInitialState","setScreenStatuses"]),mapMutations("bookingOptions",["setAvailabilityEditorState"]),mapMutations("bookings",["setServices"]),{openAvailabilityEditor:function(availability){this.setAvailabilityEditorState(availability),this.availabilityEditorStateToggleable.setState(!0)}}),components:{calendar:"calendar",repeater:"repeater",tabs:"tabs",tab:"tab",modal:"modal",switcher:"switcher","availability-calendar":"availability-calendar","session-length":"session-length","bool-switcher":"bool-switcher","selection-list":"selection-list","service-availability-editor":"service-availability-editor","bookings-page":"bookings-page"}}};var _stdLib=__webpack_require__(0)},function(module,exports,__webpack_require__){"use strict";function CfSessionLength(Vue,Vuex){var mapState=Vuex.mapState,mapMutations=Vuex.mapMutations;return Vue.extend({inject:["repeater","humanizeDuration"],data:function(){var _this=this;return{timeUnits:[{title:"mins",seconds:60},{title:"hours",seconds:3600},{title:"days",seconds:86400},{title:"weeks",seconds:604800}],sessionTimeUnit:60,sessionDefault:{sessionLength:null,price:null},validationError:null,sessions:new _stdLib.FunctionalArrayCollection(function(){return _this.storeSessions},function(sessions){_this.setSessions(sessions)},function(item){return item.id})}},watch:{sessionDefault:{deep:!0,handler:function(){this.validationError=null}}},computed:_extends({},mapState({storeSessions:function(state){return state.app.sessions}})),methods:_extends({},mapMutations(["setSessions"]),{humanize:function(seconds){return this.humanizeDuration(1e3*seconds,{units:["w","d","h","m"],round:!0})},addNewSession:function(){if(this.validate()){var sessionLength=this.sessionTimeUnit*this.sessionDefault.sessionLength;this.sessions.addItem({id:this.sessions.getItems().length,sessionLength:sessionLength,price:this.sessionDefault.price}),this.sessionDefault={sessionLength:null,price:null}}},validate:function(){return Number(this.sessionDefault.sessionLength)<=0?(this.validationError=this.$refs.sessionLength.dataset.validationError,!1):!(null===this.sessionDefault.price||!this.sessionDefault.price.length)||(this.validationError=this.$refs.price.dataset.validationError,!1)}}),components:{repeater:"repeater"}})}Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};exports.default=CfSessionLength;var _stdLib=__webpack_require__(0)},function(module,exports,__webpack_require__){"use strict";function CfModal(AbstractDialog){return AbstractDialog.extend({template:"#modal-template",inject:["dom"],props:{title:{type:String},modalBodyClass:{type:String,default:""},dialogOpenedClass:{type:String,default:"modal-opened"}},mounted:function(){var _this=this;this.$on("open",function(){_this.dom.getElement("body").classList.add(_this.dialogOpenedClass)}),this.$on("close",function(){_this.dom.getElement("body").classList.remove(_this.dialogOpenedClass)})}})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=CfModal},function(module,exports,__webpack_require__){"use strict";function CfAbstractEntityModalEditor(Vue){return Vue.extend({$model:{},inject:["equal"],data:function(){return{seedLock:!1,removeConfirming:!1,closeConfirming:!1,cancelConfirming:!1,mountedModel:{},model:null}},computed:{modalIsVisible:function(){return this.modalState.isOn()},isDoubleConfirming:function(){return this.removeConfirming||this.closeConfirming||this.cancelConfirming},isModelChanged:function(){return!this.equal(this.model,this.mountedModel)}},watch:{modalIsVisible:function(){this.seedModelFields()}},mounted:function(){if(!this.model)throw new Error("Model empty state is not provided. It should be available via this.model and describe entity");if(!this.modalState)throw new Error("Modal state toggle is not provided. It should be available via this.modalState");if(!this.entityModel)throw new Error("Entity model is not provided. It should be available via this.entityModel");if(!this.entitiesCollection)throw new Error("Entities collection is not provided. It should be available via this.entitiesCollection and has type of FunctionalCollection");this.$model=Object.assign({},this.model)},methods:{seedModelFields:function(){var _this=this;this.seedLock=!0;var model=Object.assign({},this.$model,this.entityModel);Object.keys(model).map(function(key){Vue.set(_this.model,key,JSON.parse(JSON.stringify(model[key]))),Vue.set(_this.mountedModel,key,JSON.parse(JSON.stringify(model[key])))}),this.removeConfirming=!1,this.closeConfirming=!1,this.cancelConfirming=!1,this.$nextTick(function(){_this.seedLock=!1})},closeModal:function(){var field=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"closeConfirming";return this.entityCanBeModified&&!this.entityCanBeModified()?void this.forceCloseModal():this.isModelChanged?void(this[field]=!0):void this.forceCloseModal()},cancelModal:function(){this.closeModal("cancelConfirming")},forceCloseModal:function(){this.modalState.setState(!1)},continueEditing:function(){this.closeConfirming=!1},saveItem:function(){var savingModel=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,model=Object.assign({},savingModel||this.model);if(!model.id){var id=Math.random().toString(36).substring(7);return this.entitiesCollection.addItem(Object.assign({},model,{id:id})),void this.forceCloseModal()}this.entitiesCollection.hasItem(model)&&(this.entitiesCollection.removeItem(model),this.entitiesCollection.addItem(model)),this.forceCloseModal()},deleteItem:function(){this.entitiesCollection.removeItem(this.model),this.forceCloseModal()}}})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=CfAbstractEntityModalEditor},function(module,exports,__webpack_require__){"use strict";function CfServiceAvailabilityEditor(AbstractEntityModalEditor,_ref,moment){var mapState=_ref.mapState,mapMutations=_ref.mapMutations,helpers={getDate:function(date){var parts=date.split("-");return new Date(parts[0],parts[1]-1,parts[2])},makeTimeModel:function(key){return{get:function(){if(!this.model[key])return{HH:null,mm:null};var parts=this.model[key].split(":");return{HH:parts[0],mm:parts[1]}},set:function(value){this.model[key]=value.HH+":"+value.mm+":00"}}}};return AbstractEntityModalEditor.extend({inject:{momentHelpers:"momentHelpers",modalState:{from:"availabilityEditorStateToggleable"},entitiesCollection:{from:"availabilitiesCollection"},modal:"modal",repeater:"repeater",datepicker:"datepicker","time-picker":"time-picker","selection-list":"selection-list"},data:function(){var _this=this;return{model:{id:null,fromDate:null,fromTime:null,toTime:null,isAllDay:!1,repeats:"never",repeatsEvery:2,repeatsOn:[],repeatsEnds:"afterWeeks",repeatsEndsWeeks:null,repeatsEndsDate:null,excludesDates:[]},exclusionsPickerVisible:!1,excludesDatesCollection:new _stdLib.FunctionalArrayCollection(function(){return _this.model.excludesDates},function(newDates){_this.model.excludesDates=newDates},function(date){return date}),repeatsOnCollection:new _stdLib.FunctionalArrayCollection(function(){return _this.repeatsOn},function(newValue){},function(item){return item.key})}},watch:{"model.repeats":function(newValue){if(!this.seedLock)switch(this.model.repeatsEvery=2,newValue){case"month":this.model.repeatsOn=["dom"];break;default:this.model.repeatsOn=[]}}},computed:_extends({},mapState("bookingOptions",{entityModel:function(state){return state.serviceAvailabilityModel}}),{excludesDatesModels:function(){return{dates:this.model.excludesDates.map(function(date){return helpers.getDate(date)})}},currentDay:function(){var today=moment();return today.set({hour:0,minute:0,second:0}),today.toDate()},availabilityStart:function(){return moment(this.model.fromDate).toDate()},fromTimeModel:helpers.makeTimeModel("fromTime"),toTimeModel:helpers.makeTimeModel("toTime"),repeatingTitle:function(){switch(this.model.repeats){case"day":return"days";case"week":return"weeks";case"month":return"months";case"year":return"years";default:return"nopes :)"}},repeatingDuration:function(){switch(this.model.repeats){case"day":return 31;case"week":return 51;case"month":return 12;case"year":return 5;default:return 31}},repeatsOn:function(){if("week"!==this.model.repeats&&"month"!==this.model.repeats)return[];var start=moment(this.model.fromDate),repeatsOptions={week:{mon:"M",tue:"T",wed:"W",thu:"T",fri:"F",sat:"S",sun:"S"},month:{dom:start?"Montly on day "+start.format("D"):"",dow:start?"Montly on the "+this.momentHelpers.weekdayInMonthNumber(start)+" "+start.format("dddd"):""}};return function(obj){return Object.keys(obj).map(function(key){return{key:key,value:obj[key]}})}(repeatsOptions[this.model.repeats])}}),methods:_extends({},mapMutations({setNewEntities:"setNewAvailabilities"}),{_getExclusionItemTitle:function(date){return helpers.getDate(date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})},entityCanBeModified:function(){return!0},excludeDateSelected:function(date){date=moment(date).format("YYYY-MM-DD"),this.excludesDatesCollection.hasItem(date)?this.excludesDatesCollection.removeItem(date):this.excludesDatesCollection.addItem(date),this.$refs.exclusions.selectedDate=null}}),components:{repeater:"repeater",modal:"modal",datepicker:"datepicker","time-picker":"time-picker","selection-list":"selection-list"}})}Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};exports.default=CfServiceAvailabilityEditor;var _stdLib=__webpack_require__(0)},function(module,exports,__webpack_require__){"use strict";function CfBookingEditor(AbstractEntityModalEditor,_ref,moment,debounce){var mapState=_ref.mapState,mapActions=(_ref.mapMutations,_ref.mapActions);return AbstractEntityModalEditor.extend({inject:{clientsApi:"clientsApi",bookingsApi:"bookingsApi",helpers:{from:"bookingHelpers"},humanizeDuration:"humanizeDuration",modalState:{from:"bookingEditorState"},entitiesCollection:{from:"bookingsCollection"},modal:"modal",repeater:"repeater",datepicker:"datepicker",vueselect:"vueselect","datetime-picker":"datetime-picker"},data:function(){return{isCreateConfirming:!1,isBookingSaving:!1,isClientsLoading:!1,isCreatingClient:!1,isSavingClient:!1,isDeleting:!1,model:{id:null,client:null,service:null,start:null,end:null,status:null,paymentNumber:null,clientTimezone:0,note:null,newStatus:""},newClient:{name:"",email:""},foundClients:[],actionsMap:{"in-cart":["pending"],draft:["pending"],pending:["approved","cancelled"],approved:["scheduled"],scheduled:["draft","pending","cancelled"],cancelled:["in-cart","draft","pending","approved","scheduled"],completed:["in-cart","draft","pending","approved","scheduled"]}}},computed:_extends({},mapState("bookings",{entityModel:function(state){return state.bookingModel},services:function(state){return state.services}}),{availableActions:function(){return this.model.id?this.actionsMap[this.model.status]||[]:[]},statusStyle:function(){return this.helpers.statusStyle(this.model.status)},duration:function(){if(!this.model.start||!this.model.end)return null;var diffInMilliseconds=60*Math.abs(moment(this.model.end).diff(moment(this.model.start),"minutes"))*1e3;return diffInMilliseconds?this.humanizeDuration(diffInMilliseconds,{conjunction:" and ",serialComma:!1,units:["w","d","h","m"],round:!0}):null},statusTitle:function(){return this.model.status?this.model.status.charAt(0).toUpperCase()+this.model.status.slice(1):null}}),methods:_extends({},mapActions("bookings",["saveBookingOnBackend"]),{saveNewBooking:function(newStatus){this.model.newStatus=newStatus,this.isCreateConfirming=!0},confirmBookingCreation:function(){var _this=this;this.$validator.validateAll().then(function(result){if(!result)return void(_this.isCreateConfirming=!1);_this.saveBooking().then(function(){_this.isCreateConfirming=!1})})},saveBooking:function(){var _this2=this,model=Object.assign({},this.model);return model.newStatus&&(model.status=model.newStatus,delete model.newStatus),this.isBookingSaving=!0,this.saveBookingOnBackend({api:this.bookingsApi,model:model}).then(function(){_this2.$emit("updated"),_this2.forceCloseModal(),_this2.isBookingSaving=!1})},confirmBookingDeletion:function(){this.isDeleting=!1,this.removeConfirming=!0},deleteBooking:function(){this.isDeleting=!0,this.$emit("delete",Object.assign({},this.model))},format:function(time){var offset=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,currentOffset=moment().utcOffset()/60;return moment(time).utcOffset(currentOffset+Number(offset)).format("DD/MM/YY HH:mm")},onClientSearch:function(search,loading){this.isClientsLoading=!0,loading(!0),this._searchClients(loading,search,this)},_searchClients:debounce(function(loading,search,vm){vm.clientsApi.fetch({search:search}).then(function(response){vm.foundClients=response.data,vm.isClientsLoading=!1,loading(!1)})},350),createClient:function(){this.newClient={name:"",email:""},this.isCreatingClient=!0},saveNewClient:function(){var _this3=this;this.isSavingClient=!0,this.clientsApi.create(this.newClient).then(function(response){_this3.model.client=response.data,_this3.isSavingClient=!1,_this3.isCreatingClient=!1})},bookingCanBe:function(newStatus){return this.availableActions.indexOf(newStatus)>-1}}),components:{modal:"modal",vueselect:"vueselect","datetime-picker":"datetime-picker"}})}Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};exports.default=CfBookingEditor},function(module,exports,__webpack_require__){"use strict";function CfSwitcher(AbstractButtonGroup){return AbstractButtonGroup.extend({template:"#switcher-template",props:{value:{}},mounted:function(){this.$on("button-clicked",this.buttonClicked)},methods:{buttonClicked:function(buttonId){this.$emit("input",buttonId)}}})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=CfSwitcher},function(module,exports,__webpack_require__){"use strict";function CfAbstractButtonsGroup(Vue){return Vue.extend({props:{buttons:{required:!0}},methods:{buttonClick:function(buttonId){this.$emit("button-clicked",buttonId)}}})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=CfAbstractButtonsGroup},function(module,exports,__webpack_require__){"use strict";function CfAbstractDialog(Vue){return Vue.extend({props:{active:{type:Boolean}},watch:{active:function(isDialogActive){this.$emit(isDialogActive?"open":"close")}}})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=CfAbstractDialog},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(FullCalendar,moment){return FullCalendar.extend({inject:["availabilitiesCollection","momentHelpers"],data:function(){return{rangeStart:null,rangeEnd:null,generatedAvailabilities:[]}},props:{availabilities:{default:function(){return[]}},overlappingAvailabilities:{type:Boolean,default:!1},header:{default:function(){return{left:"agendaWeek,month today",right:"prev title next"}}},defaultView:{default:function(){return"agendaWeek"}},config:{type:Object,default:function(){var self=this;return{viewRender:function(view){self.rangeStart=view.start,self.rangeEnd=view.end,self.renderRepeatedAvailabilities()},selectAllow:function(selectInfo){return selectInfo.start.isSameOrAfter(moment(),"day")}}}}},computed:{events:function(){return this.generatedAvailabilities}},watch:{availabilities:{deep:!0,handler:function(){this.rangeStart&&this.renderRepeatedAvailabilities()}},generatedAvailabilities:function(value){var overlapping={},_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=value[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var availability=_step.value;if(overlapping[availability.start]||(overlapping[availability.start]=0),availability.model.isAllDay&&overlapping[availability.start]++,overlapping[availability.start]>1)return void this.$emit("update:overlappingAvailabilities",!0)}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{!_iteratorNormalCompletion&&_iterator.return&&_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}this.$emit("update:overlappingAvailabilities",!1)}},mounted:function(){this.$on("event-created",this.eventCreated),this.$on("event-selected",this.eventClicked),this.$on("event-render",this.eventRender)},methods:{eventRender:function(event,el){(event.end||event.start).isBefore(moment(),"day")&&el[0].classList.add("fc-event--past")},renderRepeatedAvailabilities:function(){if(this.availabilities.map){for(var repeatedAvailabilities=[],m=moment(this.rangeStart);m.diff(this.rangeEnd,"days")<=0;m.add(1,"days"))repeatedAvailabilities=repeatedAvailabilities.concat(this.getAvailabilitiesForDay(moment(m)));this.generatedAvailabilities=repeatedAvailabilities}},getAvailabilitiesForDay:function(day){var _this=this;return this.availabilities.filter(function(item){return _this.availabilityFitsInDay(item,day)}).map(function(item){return _this.availabilityToEvent(item,day)})},availabilityFitsInDay:function(availability,day){var fromDate=moment(availability.fromDate,"YYYY-MM-DD");return!(fromDate.isAfter(day,"day")||this.availabilityEnded(availability,fromDate,day)||this.dayInExcluded(availability,day))&&this.availabilityIsOnDay(availability,fromDate,day)},dayInExcluded:function(availability,day){if(!availability.excludesDates||!availability.excludesDates.length)return!1;var _iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_iterator2=availability.excludesDates[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){var excludedDate=_step2.value;if(moment(excludedDate,"YYYY-MM-DD").isSame(day,"day"))return!0}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{!_iteratorNormalCompletion2&&_iterator2.return&&_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}return!1},availabilityIsOnDay:function(availability,fromDate,day){var diff=availability.repeats;if(fromDate.diff(day,diff)%availability.repeatsEvery!=0)return!1;var vm=this,repeatingRules={never:function(){return fromDate.isSame(day,"day")},day:function(){return!0},week:function(){return availability.repeatsOn.indexOf(day.format("ddd").toLowerCase())>-1},month:function(){return"dow"===availability.repeatsOn[0]?vm.momentHelpers.weekdayOfMonthIsSame(fromDate,day):fromDate.format("D")===day.format("D")},year:function(){return fromDate.format("DD/MM")===day.format("DD/MM")}};return!!repeatingRules[availability.repeats]&&repeatingRules[availability.repeats]()},availabilityEnded:function(availability,fromDate,day){return"never"!==availability.repeats&&("afterWeeks"===availability.repeatsEnds?moment(fromDate).add(availability.repeatsEndsWeeks,"week").isBefore(day):"onDate"===availability.repeatsEnds&&moment(availability.repeatsEndsDate,"YYYY-MM-DD").isBefore(day))},availabilityToEvent:function(availability,day){var model=Object.assign({},availability);return Object.assign({},{id:model.id,editable:!1,model:model},model.isAllDay?{start:day.format("YYYY-MM-DD")}:{start:day.format("YYYY-MM-DD")+"T"+model.fromTime,end:day.format("YYYY-MM-DD")+"T"+model.toTime,allDay:model.isAllDay})},eventCreated:function(params){this.fireMethod("unselect");var event={id:null};if(params){var start=params.start,end=params.end,allDay=params.allDay;event=Object.assign({},event,{fromDate:start.format(),isAllDay:allDay}),allDay||(event=Object.assign({},event,{fromTime:start.format("HH:mm:ss"),toTime:end.format("HH:mm:ss")}))}this.$emit("availability-click",event)},eventClicked:function(event){this.$emit("availability-click",Object.assign({},event.model))}},render:function(h){var self=this;return h("div",{ref:"calendar"},[h("div",{class:"button-floating",on:{click:function(){self.eventCreated()}}},["+"])])}})}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};exports.default=function(FullCalendar,_ref,moment){var mapMutations=(_ref.mapState,_ref.mapMutations),renderEvent=function(event){var title=event.title||"New booking",clientName=event.clientName||"",action=event.title?"Click for more details":"Release to create booking";return'\n      <div class="rc-event-field rc-event-field--title">'+title+'</div>\n      <div class="rc-event-field rc-event-field--time">'+event.start.format("HH:mm")+" - "+event.end.format("HH:mm")+'</div>\n      <div class="rc-event-field rc-event-field--month-collapse">'+clientName+'</div>\n      <div class="rc-event-field rc-event-field--month-collapse rc-event-field--click">'+action+"</div>\n    "};return FullCalendar.extend({inject:{bookingStatusesColors:"bookingStatusesColors",helpers:{from:"bookingHelpers"}},data:function(){return{generatedEvents:[]}},props:{bookings:{default:function(){return[]}},colorScheme:{type:String,default:"status"},header:{default:function(){return{left:"prev",center:"title",right:"next"}}},config:{type:Object,default:function(){var self=this;return{eventLimit:!0,viewRender:function(view){self.$emit("period-change",view.start,view.end)},selectAllow:function(selectInfo){return selectInfo.start.isSameOrAfter(moment(),"day")}}}}},computed:{events:function(){return this.generateEvents(this.bookings,this.colorScheme)}},mounted:function(){this.$on("event-created",this.eventCreated),this.$on("event-selected",this.eventClicked),this.$on("event-render",this.eventRender)},methods:_extends({},mapMutations("bookingOptions",["setAvailabilityEditorState"]),{eventCreated:function(params){this.fireMethod("unselect"),moment().isAfter(params.end)||this.$emit("booking-create",{start:params.start.format("YYYY-MM-DD HH:mm:ss"),end:params.end.format("YYYY-MM-DD HH:mm:ss")})},generateEvents:function(bookings,colorScheme){var _this=this;return bookings.map(function(booking){return _this.bookingToEvent(booking,colorScheme)})},bookingToEvent:function(booking,colorScheme){var model=Object.assign({},booking);return Object.assign({},_extends({id:model.id,editable:!1,title:model.service.title,start:moment(model.start),end:moment(model.end),clientName:model.client.name},this.bookingColor(booking,colorScheme),{model:model}),{})},bookingColor:function(booking,colorScheme){var color="status"===colorScheme?this.bookingStatusesColors[booking.status]:booking.service.color;return{color:color,textColor:this.helpers.getBrightness(color)>.5?"#000":"#fff"}},eventRender:function(event,element,view){(event.end||event.start).isBefore(moment(),"day")&&element[0].classList.add("fc-event--past"),"service"===this.colorScheme&&element.addClass("rc-service-event rc-service-event--"+event.model.status),element.find(".fc-content").addClass("rc-event").html(renderEvent(event))},eventClicked:function(event){this.$emit("booking-click",Object.assign({},event.model))}})})}},function(module,exports,__webpack_require__){"use strict";function CfBoolSwitcher(Switcher){return Switcher.extend({template:"#bool-switcher-template",props:{danger:{default:!1},trueValue:{default:"yes"},buttons:{type:Object,default:function(){return{yes:"Yes",no:"No"}}}},computed:{activeButton:function(){var buttons=Object.keys(this.buttons);return buttons[1]!==this.trueValue&&buttons.reverse(),buttons[Number(this.value)]}},methods:{switcherClicked:function(){this.$emit("input",!this.value)}}})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=CfBoolSwitcher},function(module,exports,__webpack_require__){"use strict";function CfRcSelect(VueSelect){return VueSelect.extend({props:{transition:{default:"empty"},clearable:{default:!1}},computed:{showClearButton:function(){return!this.multiple&&this.clearable&&!this.open&&this.mutableValue}},methods:{select:function(option){this.isOptionSelected(option)||(this.taggable&&!this.optionExists(option)&&(option=this.createOption(option)),this.multiple&&!this.mutableValue?this.mutableValue=[option]:this.multiple?this.mutableValue.push(option):this.mutableValue=option),this.onAfterSelect(option)}}})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=CfRcSelect},function(module,exports,__webpack_require__){"use strict";function CfBookingsCalendarView(AbstractBookingsView,_ref,moment){_ref.mapState,_ref.mapMutations;return AbstractBookingsView.extend({inject:{"bookings-calendar":"bookings-calendar",switcher:"switcher",modalState:{from:"bookingEditorState"}},data:function(){return{calendarViews:{agendaDay:"Day",agendaWeek:"Week",month:"Month"},calendarView:"agendaWeek",colorScheme:"status",params:{start:null,end:null}}},props:{statuses:{default:function(){return[]}},isLoading:{type:Boolean,default:!1}},watch:{calendarView:function(view){this.$refs.calendar.fireMethod("changeView",view)}},methods:{goToToday:function(){this.$refs.calendar.fireMethod("changeView",this.calendarView,moment())},createBooking:function(bookingParams){this.$emit("create",bookingParams)},editBooking:function(booking){this.$emit("edit",booking)},updateBookings:function(start,end){this.params.start=start.format("YYYY-MM-DD"),this.params.end=end.format("YYYY-MM-DD"),this.updateFilter()},buildParams:function(){return Object.assign({},this.params)}},components:{"bookings-calendar":"bookings-calendar",switcher:"switcher"}})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.CfBookingsCalendarView=CfBookingsCalendarView},function(module,exports,__webpack_require__){"use strict";function CfDatetimePicker(DatetimePicker,moment){return DatetimePicker.extend({template:"#datepicker-template",inject:["datepicker","time-picker"],props:{dataFormat:{type:String,default:"YYYY-MM-DD HH:mm:ss"},dateFormat:{type:String,default:"dd/MM/yyyy"},disabledBefore:{default:!1}},computed:{timeValue:{get:function(){if(!this.value)return null;var datetime=moment(this.value);return{HH:datetime.format("HH"),mm:datetime.format("mm")}},set:function(newValue){var datetime=moment(this.value||moment());datetime.set({hour:newValue.HH,minute:newValue.mm}),this.$emit("input",datetime.format(this.dataFormat))}},dateValue:{get:function(){return this.value?moment(this.value).format("YYYY-MM-DD"):null},set:function(newValue){var value=moment(this.value||moment());value.set({year:newValue.getFullYear(),month:newValue.getMonth(),date:newValue.getUTCDate(),second:0}),this.$emit("input",value.format(this.dataFormat))}},disabledDates:function(){if(!this.disabledBefore||!this.$refs.datepicker)return{};var selectedDate=(this.$refs.datepicker.pageDate,moment(this.disabledBefore));return selectedDate.set({hour:0,minute:0,second:0}),{to:selectedDate.toDate()}},disabledTime:function(){if(this.disabledBefore&&this.value){if(this.dateValue===moment(this.disabledBefore).format("YYYY-MM-DD")){var datetime=moment(this.disabledBefore);return{HH:datetime.format("HH"),mm:datetime.format("mm")}}}}},mounted:function(){this.$refs.timepicker.$el.querySelector("input").onclick=function(e){e.target.select()}},methods:{openDatepicker:function(){this.$refs.datepicker.$refs.dateInput.click()},datepickerOpened:function(){this.$refs.datepicker.$refs.dateInput.select()},dateSelected:function(){this.$refs.timepicker.toggleDropdown(),this.$refs.timepicker.$el.querySelector("input").select()}},components:{datepicker:"datepicker","time-picker":"time-picker"}})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.CfDatetimePicker=CfDatetimePicker},function(module,exports,__webpack_require__){"use strict";function CfBookingsListView(AbstractBookingsView,_ref,moment){_ref.mapState,_ref.mapMutations,_ref.mapActions;return AbstractBookingsView.extend({inject:{"list-table":{from:"wpListTable"}},data:function(){return{params:{page:1},month:!1,actions:[{key:"edit",label:"Edit / View Booking"},{key:"trash",label:"Delete Permanently"}],columns:{date:{label:"Booking date and time"},client:{label:"Client Name"},service:{label:"Service"},status:{label:"Booking Status"}}}},computed:{pagesCount:function(){return this.bookingsCount?Math.ceil(this.bookingsCount/10):1}},methods:{humanizeDate:function(date){return moment(date).format("ha, dddd, Do MMMM YYYY")},onActionClick:function(action,row){"edit"===action&&this.$emit("edit",row),"trash"===action&&this.$emit("delete",row,!0)},buildParams:function(){var params=Object.assign({},this.params);return this.service&&(params.service=this.service),this.month&&(params.month=this.month),params},goToPage:function(page){this.params.page=page,this.updateFilter()},_month:function(monthNumber){return moment(monthNumber,"M").format("MMMM")}},components:{"list-table":"list-table"}})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.CfBookingsListView=CfBookingsListView},function(module,exports,__webpack_require__){"use strict";function CfServiceBookingsApplication(state,store,Vuex){var mapState=Vuex.mapState,mapMutations=Vuex.mapMutations;return{store:store,inject:["repeater","tabs","tab","modal","session-length","service-availability-editor","switcher","bool-switcher","selection-list","availability-calendar","availabilityEditorStateToggleable"],data:function(){return{enableBookings:!0,overlappingAvailabilities:!1,activeTab:0,tabsConfig:{switcherClass:"horizontal-tabs",switcherItemClass:"horizontal-tabs__item",switcherActiveItemClass:"_active",tabsClass:"tabs-content"},displayOptions:{useCustomerTimezone:!1}}},computed:_extends({},mapState({availabilities:function(state){return state.app.availabilities}}),{useCustomerTimezone:{get:function(){return this.$store.state.app.displayOptions.useCustomerTimezone},set:function(value){this.$store.commit("setDisplayOptions",{key:"useCustomerTimezone",value:value})}}}),mounted:function(){if(!state)throw new Error("Service Bookings App state not initialized");this.setInitialState(state)},methods:_extends({},mapMutations(["setInitialState"]),mapMutations("bookingOptions",["setAvailabilityEditorState"]),{openAvailabilityEditor:function(availability){this.setAvailabilityEditorState(availability),this.availabilityEditorStateToggleable.setState(!0)}}),components:{repeater:"repeater",tabs:"tabs",tab:"tab",modal:"modal",switcher:"switcher","availability-calendar":"availability-calendar","session-length":"session-length","bool-switcher":"bool-switcher","selection-list":"selection-list","service-availability-editor":"service-availability-editor"}}}Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};exports.CfServiceBookingsApplication=CfServiceBookingsApplication},function(module,exports,__webpack_require__){"use strict";function CfBookingsApplication(state,store,_ref,Vue){var mapState=_ref.mapState,mapMutations=_ref.mapMutations,mapActions=_ref.mapActions;return{store:store,inject:{"selection-list":"selection-list","bookings-calendar-view":"bookings-calendar-view","bookings-list-view":"bookings-list-view","booking-editor":"booking-editor",tabs:"tabs",tab:"tab",api:{from:"bookingsApi"},modalState:{from:"bookingEditorState"}},data:function(){var _this=this;return{activeView:0,tabsConfig:{switcherItemClass:"fc-button fc-state-default tab-item",switcherActiveItemClass:"fc-state-active",switcherClass:"fc-button-group fc-button-group--padded",tabsClass:"tabs-content--no-paddings"},selectedStatuses:[],statuses:[{key:"in-cart",value:"In Cart"},{key:"approved",value:"Approved"},{key:"completed",value:"Completed"},{key:"scheduled",value:"Scheduled"},{key:"pending",value:"Pending"},{key:"draft",value:"Draft"},{key:"cancelled",value:"Cancelled"}],statusesCollection:new _stdLib.FunctionalArrayCollection(function(){return _this.statuses},function(newValue){},function(item){return item.key})}},computed:_extends({},mapState({screenStatuses:function(state){return state.app.screenStatuses}}),mapState("ui",{isLoading:function(state){return state.bookings.isLoading},viewFilter:function(state){return state.bookings.viewFilter}})),mounted:function(){if(!state)throw new Error("App state not initialized");if(state.services){var services=state.services.slice();delete state.services,this.setInitialState(state),this.setServices(services)}this.selectedStatuses=this.screenStatuses.slice()},methods:_extends({},mapMutations(["setInitialState"]),mapMutations("bookings",["setServices","setBookingEditorState","setBookings","setBookingsCount"]),mapMutations("ui",["setBookingsViewFilter","setBookingsIsLoading"]),mapActions("bookings",["fetchBookings","deleteBookingFromBackend"]),{clearBookings:function(){this.setBookings([]),this.setBookingsCount(0)},setScreenStatuses:function(statuses){this.$store.commit("setScreenStatuses",statuses),this.fetch()},fetch:function(){var _this2=this,params=arguments.length>0&&void 0!==arguments[0]&&arguments[0];params&&this.setBookingsViewFilter(Object.assign({},params)),params=Object.assign({},this.viewFilter),params.screenStatuses=this.screenStatuses,params.status=params.status||"all",this.setBookingsIsLoading(!0),this.fetchBookings({api:this.api,params:params}).then(function(){_this2.setBookingsIsLoading(!1)})},createBooking:function(){var bookingParams=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._openBookingEditor(bookingParams)},editBooking:function(booking){this._openBookingEditor(booking)},deleteBooking:function(booking){arguments.length>1&&void 0!==arguments[1]&&arguments[1]?confirm("Are you sure you want to delete this booking? There is no undo option.")&&this._deleteBooking(booking):this._deleteBooking(booking)},_deleteBooking:function(model){var _this3=this;Vue.set(model,"isDeleting",!0),this.deleteBookingFromBackend({api:this.api,model:model}).then(function(){Vue.set(model,"isDeleting",!1),_this3._closeBookingEditor(),_this3.fetch()})},_openBookingEditor:function(){var booking=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.modalState.setState(!0),this.setBookingEditorState(booking)},_closeBookingEditor:function(){this.modalState.setState(!1),this.setBookingEditorState({})}}),components:{"booking-editor":"booking-editor","bookings-calendar-view":"bookings-calendar-view","bookings-list-view":"bookings-list-view",tabs:"tabs",tab:"tab","selection-list":"selection-list"}}}Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};exports.CfBookingsApplication=CfBookingsApplication;var _stdLib=__webpack_require__(0)},function(module,exports,__webpack_require__){"use strict";function CfVueTimepicker(VueTimepicker){return VueTimepicker.extend({template:"#vue-timepicker-template",props:{disabledTo:{type:Object}},watch:{showDropdown:function(value){var _this=this;value&&this.$nextTick(function(){_this._scrollToSelected()})}},computed:{disabledValues:function(){var def={hour:[],minute:[],second:[],apm:[]};if(!this.disabledTo)return def;var hour=[],minute=[],hourValue=!!this.hour&&Number(this.hour),disableToHour=Number(this.disabledTo[this.hourType]),disableToMinute=Number(this.disabledTo[this.minuteType]);return hour=Array.apply(null,{length:disableToHour}).map(Number.call,Number),59===disableToMinute&&hour.push(disableToHour),hourValue===disableToHour&&(minute=Array.apply(null,{length:disableToMinute+1}).map(Number.call,Number)),{hour:hour,minute:minute,second:[],apm:[]}}},methods:{_scrollToSelected:function(){var scrollLists=["hours","minutes","seconds","apms"],_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=scrollLists[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var listClass=_step.value,el=this.$el.querySelector(".select-list ."+listClass);if(el){var activeNode=el.querySelector(".active");activeNode&&(el.scrollTop=activeNode.offsetTop-65+15)}}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{!_iteratorNormalCompletion&&_iterator.return&&_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}}}})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.CfVueTimepicker=CfVueTimepicker},function(module,exports,__webpack_require__){"use strict";function CfBookingsFilter(_ref){var mapState=_ref.mapState,mapMutations=_ref.mapMutations;return{template:"#bookings-filter-template",inject:["selection-list"],props:{searchString:{},status:{}},data:function(){var _this=this;return{items:new _FunctionalCollection.FunctionalCollection(function(){return _this.statuses},function(statuses){_this.setBookingsStatuses(statuses)},function(status){return status.id})}},computed:_extends({},mapState("bookings",["bookingsCount","statuses"]),{searchStringModel:{get:function(){return this.searchString},set:function(value){this.$emit("update:searchString",value)}},statusModel:{get:function(){return[this.status]},set:function(value){this.$emit("update:status",value[0]),this.submit()}}}),methods:_extends({},mapMutations("bookings",["setBookingsStatuses"]),{submit:function(){this.$emit("submit")}}),components:{"selection-list":"selection-list"}}}Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};exports.CfBookingsFilter=CfBookingsFilter;var _FunctionalCollection=__webpack_require__(43)},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();exports.FunctionalCollection=function(){function FunctionalCollection(getItems,setItems,keyGetter){if(_classCallCheck(this,FunctionalCollection),!getItems)throw new Error("Getter must be provided");if(!setItems)throw new Error("Setter must be provided");if(!keyGetter)throw new Error("Key getter must be provided");this._itemsGetter=getItems,this._itemsSetter=setItems,this._keyGetter=keyGetter}return _createClass(FunctionalCollection,[{key:"_setItems",value:function(items){this._itemsSetter(items)}},{key:"_getItems",value:function(){return this._itemsGetter()}},{key:"getItems",value:function(){return Object.assign({},this._getItems())}},{key:"addItem",value:function(item){var items=this._getItems();items=this._addItem(items,item),this._setItems(items)}},{key:"hasItem",value:function(item){return!!this._getItems()[this._keyGetter(item)]}},{key:"removeItem",value:function(item){var items=this._getItems();items=this._removeItem(items,item),this._setItems(items)}},{key:"_addItem",value:function(items,item){items=Object.assign({},items);var id=this._keyGetter(item);if(items[id])throw new Error("Item with id "+id+" already exists");return items[id]=item,items}},{key:"_removeItem",value:function(items,item){return items=Object.assign({},items),delete items[this._keyGetter(item)],items}},{key:"_addItems",value:function(items,newItems){for(var i in newItems)this._addItem(items,newItems[i]);return items}}]),FunctionalCollection}()},function(module,exports,__webpack_require__){"use strict";function CfAbstractBookingsView(Vue,_ref){var mapState=_ref.mapState,mapMutations=_ref.mapMutations;return Vue.extend({inject:["bookings-filter"],props:{isLoading:{type:Boolean,default:!1}},computed:_extends({},mapState("bookings",["bookings","bookingsCount","services","filter"]),{status:{get:function(){return this.filter.status},set:function(value){this.setBookingsFilter({key:"status",value:value})}},search:{get:function(){return this.filter.search},set:function(value){this.setBookingsFilter({key:"search",value:value})}},service:{get:function(){return this.filter.service},set:function(value){this.setBookingsFilter({key:"service",value:value})}}}),mounted:function(){this.$emit("ready"),this.$nextTick(this.updateFilter)},methods:_extends({},mapMutations("bookings",["setBookingsFilter"]),{buildParams:function(){throw new Error("Implement `buildParams()` method.")},updateFilter:function(){var params=this.buildParams(),viewFilter=Object.assign({},this.filter);viewFilter=Object.keys(viewFilter).filter(function(key){return null!==viewFilter[key]}).reduce(function(res,key){return res[key]=viewFilter[key],res},{}),params=Object.assign({},params,viewFilter),this.$emit("update-filter",params)}}),components:{"bookings-filter":"bookings-filter"}})}Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};exports.CfAbstractBookingsView=CfAbstractBookingsView}])});