<script type="text/x-template" id="color-picker-template">
<div class="eddbk-color-picker" :class="{'eddbk-color-picker--opened': isPickerOpened}" v-click-outside="closePicker">
    <div class="eddbk-color-picker-input" @click="openPicker">
        <div class="eddbk-color-picker-input__square" :style="{'background-color':value}"></div>
        <span class="dashicons dashicons-arrow-down"></span>
    </div>
    <div class="eddbk-color-picker-popup">
        <core-color-picker v-model="color" :disable-alpha="true"></core-color-picker>
        <div class="eddbk-color-picker-popup__buttons">
            <button class="button button-primary" @click="selectColor">
                {{ _('Select Color') }}
            </button>
        </div>
    </div>
</div>
</script>

<script type="text/x-template" id="service-session-selector-template">
    <div>
        <template v-if="!service">
            <div class="description">Please select service to choose available session for booking.</div>
        </template>
        <div :class="isEditModeAvailable && !isEditing ? 'readonly' : ''" v-else>
            <div class="form-row">
                <div class="form-row__label form-row__label--smaller">
                    {{ ('Duration') }}
                </div>
                <div class="form-row__input" :class="isEditModeAvailable && !isEditing ? 'form-row__input--padded' : ''">
                    <session-duration-picker
                            v-model="sessionDuration"
                            :service="service"
                            :isEditModeAvailable="isEditModeAvailable"
                            :isEditing="isEditing"
                    ></session-duration-picker>
                </div>
            </div>
            <div class="form-row">
                <div class="form-row__label form-row__label--smaller">
                    {{ ('Date') }}
                    <span class="loading-inline" v-if="isSessionsLoading"></span>
                </div>
                <div class="form-row__input exclusions-datepicker">
                    <session-date-picker
                            v-model="selectedDaySessions"
                            :is-daily-duration="isDailyDuration"
                            :selected-day.sync="selectedDay"
                            :session.sync="session"
                            :loading="isSessionsLoading"
                            :selected-session-length="sessionDuration"
                            :available-sessions="sessions"
                            :prev-available-day.sync="prevAvailableDay"
                            :next-available-day.sync="nextAvailableDay"
                            @changedMonth="loadSessions"
                    ></session-date-picker>
                </div>
            </div>
            <div class="form-row" v-if="!isDailyDuration">
                <div class="form-row__label form-row__label--smaller">
                    {{ ('Time') }}
                </div>
                <div class="form-row__input" v-if="selectedDay">
                    <div class="session-picker">
                        <date-navigator
                                :selected-day.sync="selectedDay"
                                :timezone="timezone"
                                :prev-available-day="prevAvailableDay"
                                :next-available-day="nextAvailableDay"
                                v-if="!isEditModeAvailable || isEditing"
                        ></date-navigator>
                        <session-time-picker v-model="session"
                                             :selected-day.sync="selectedDay"
                                             :selected-session-length="sessionDuration"
                                             :service="service"
                                             :timezone="timezone"
                                             :sessions="selectedDaySessions"
                        ></session-time-picker>
                    </div>
                </div>
                <div class="form-row__input form-row__input--padded" v-else>
                    {{ 'Select a date to pick a time from.' }}
                </div>
            </div>
        </div>
        <div class="mt-16" v-if="service && isEditModeAvailable">
            <a href="#" @click="startEdit" v-if="!isEditing">{{ 'Edit booking duration, date and/or time' }}</a>
            <a href="#" @click="cancelEdit" class="link-danger" v-else>{{ 'Cancel changes' }}</a>
        </div>
    </div>
</script>

<script type="text/x-template" id="session-date-picker-template">
    <div class="session-date-picker" :class="loading ? 'disabled' : ''">
        <div class="edd-booking-wizard__info edd-booking-wizard__info--inline" v-if="!loading && !availableSessions.length">
            {{ 'No appointments are available this month.' }}
        </div>
        <datepicker v-model="selectedDayProxy"
                    :inline="true"
                    @changedMonth="onMonthChange"
                    :open-date="openedOnDate"
                    :disabled="{ customPredictor: isDateDisabled, to: today }"
                    :highlighted="{ dates: sessionDays, includeDisabled: true }"
                    class="sessions-datepicker"
                    maximum-view="day"
        ></datepicker>
    </div>
</script>

<script type="text/x-template" id="session-time-picker-template">
    <div class="session-picker-buttons">
        <div
                :class="{'session-picker-button--selected': isSelected(session) }"
                v-for="session in visibleSessions"
                @click="select(session)"
                class="session-picker-button"
        >
            {{ sessionLabel(session) }}
        </div>
    </div>
</script>

<script type="text/x-template" id="date-navigator-template">
    <div class="session-picker-header">
        <span class="dashicons dashicons-arrow-left" @click="goToPrevDay" :class="!prevAvailableDay ? 'disabled' : ''"></span>
        <span>{{ selectedDaySessionsLabel }}</span>
        <span class="dashicons dashicons-arrow-right" @click="goToNextDay" :class="!nextAvailableDay ? 'disabled' : ''"></span>
    </div>
</script>

<script type="text/x-template" id="session-duration-picker-template">
    <div>
        <div v-show="$attrs.isEditModeAvailable && !$attrs.isEditing">
            {{ sessionLengthLabel(valueProxy) }}
        </div>
        <select v-show="!$attrs.isEditModeAvailable || $attrs.isEditing"
                v-model="valueProxy"
                class="form-row__field"
        >
            <option :value="sessionLength" v-for="sessionLength in service.sessionLengths">
                {{ sessionLengthLabel(sessionLength) }}
            </option>
        </select>
    </div>
</script>

<script type="text/x-template" id="timezone-select-template">
    <select v-model="selectValue">
        <?php echo wp_timezone_choice( 'UTC+0', get_user_locale() ); ?>
    </select>
</script>

<script type="text/x-template" id="bookings-filter-template">
    <div>
        <selection-list :collection="items" wrap="ul" class="subsubsub" v-model="statusModel">
            <li :class="r.item.id" slot-scope="r">
                <a @click="r.select(r.item)" href="#" :class="[r.isItemSelected(r.item) ? 'current' : '']">{{ r.item.title }}
                    <span class="count" v-if="r.item.count">({{ r.item.count }})</span>
                </a>
                <span class="list-sep">|</span>
            </li>
        </selection-list>
        <p class="search-box search-box--bookings">
            <label class="screen-reader-text" for="bookings-search-input">
                Search Bookings:
            </label>
            <input type="search" id="bookings-search-input" placeholder="Start typing..." name="s" v-model="searchStringModel" @keyup.enter="submit">
            <input type="submit" id="search-submit" class="button" value="Search Bookings" @click="submit">
        </p>
    </div>
</script>

<script type="text/x-template" id="vue-timepicker-template">
  <span class="time-picker">
  <input class="display-time" :disabled="disabled" :id="id" v-model="displayTime" @click="toggleDropdown" type="text" readonly />
  <span class="clear-btn" v-if="!hideClearButton" v-show="!showDropdown && showClearBtn" @click.stop="clearTime">&times;</span>
  <div class="time-picker-overlay" v-if="showDropdown" @click.stop="toggleDropdown"></div>
  <div class="dropdown" v-show="showDropdown">
    <div class="select-list">
      <ul class="hours">
        <li class="hint" v-text="hourType"></li>
        <li v-for="(hr, hrNum) in hours"
            v-show="disabledValues.hour.indexOf(hrNum) === -1"
            v-text="hr" :class="{active: hour === hr}" @click.stop="select('hour', hr)"></li>
      </ul>
      <ul class="minutes">
        <li class="hint" v-text="minuteType"></li>
        <li v-for="(m, mNum) in minutes"
            v-show="disabledValues.minute.indexOf(mNum) === -1"
            v-text="m" :class="{active: minute === m}" @click.stop="select('minute', m)"></li>
      </ul>
      <ul class="seconds" v-if="secondType">
        <li class="hint" v-text="secondType"></li>
        <li v-for="s in seconds"
            v-show="disabledValues.second.indexOf(s) === -1"
            v-text="s" :class="{active: second === s}" @click.stop="select('second', s)"></li>
      </ul>
      <ul class="apms" v-if="apmType">
        <li class="hint" v-text="apmType"></li>
        <li v-for="a in apms"
            v-show="disabledValues.apm.indexOf(a) === -1"
            v-text="a"
            :class="{active: apm === a}"
            @click.stop="select('apm', a)"
        ></li>
      </ul>
    </div>
  </div>
</span>
</script>

<script type="text/x-template" id="datepicker-template">
    <div class="form-control datetime-picker-control"
         @click.self="openDatepicker"
    >
        <datepicker v-model="dateValue"
                    :format="dateFormat"
                    ref="datepicker"
                    ref-name="dateInput"
                    :disabled="disabledDates"
                    placeholder="-- / -- / ----"
                    @opened="datepickerOpened"
                    @selected="dateSelected"
        />
        <time-picker v-model="timeValue"
                     format="HH:mm"
                     :hide-clear-button="true"
                     ref="timepicker"
                     :disabled-to="disabledTime"
                     :disabled="timeDisabled"
        />
    </div>
</script>

<script type="text/x-template" id="switcher-template">
    <div class="fc-button-group">
        <button type="button" :class="['fc-button fc-state-default fc-state-default--rc', key === value ? 'fc-state-active' : '']" v-for="(title, key) in buttons"
            @click="buttonClick(key)"
        >{{ title }}</button>
    </div>
</script>

<script type="text/x-template" id="bool-switcher-template">
    <div class="bool-switcher" @click="switcherClicked">
        <div :class="['bool-switcher__button', key === activeButton ? 'bool-switcher__button--active' : '']" v-for="(title, key) in buttons">
            {{ title }}
        </div>
    </div>
</script>

<script type="text/x-template" id="modal-template">
    <transition name="modal-transition">
        <div class="modal" v-if="active">
            <div :class="['modal__body', this.modalBodyClass]">
                <div class="modal__header">
                    <slot name="header"></slot>
                </div>
                <div class="modal__content">
                    <slot name="body"></slot>
                </div>
                <div class="modal__footer">
                    <slot name="footer"></slot>
                </div>
            </div>
        </div>
    </transition>
</script>

<script type="text/x-template" id="availability-calendar-template">
    <div class="rc-calendar rc-calendar--availability">
        <div ref="calendar"></div>
        <div class="button-floating">+</div>
    </div>
</script>

<script type="text/x-template" id="rc-booking-calendar-event">
    <div class="rc-event-field rc-event-field--title">${ title }</div>
    <div class="rc-event-field rc-event-field--time">${ start } - ${ end }</div>
    <div class="rc-event-field rc-event-field--month-collapse">${ clientName }</div>
    <div class="rc-event-field rc-event-field--month-collapse rc-event-field--click">${ action }</div>
</script>

<script type="text/x-template" id="rc-availability-calendar-event">
    <div class="rc-event-field rc-event-field--time">${ start } - ${ end }</div>
    <div class="rc-event-field rc-event-field--timezone">${ timezone }</div>
</script>